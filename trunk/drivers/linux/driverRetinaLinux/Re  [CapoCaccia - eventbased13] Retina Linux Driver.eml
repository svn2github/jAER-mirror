Return-Path: <eventbased13-bounces@capocaccia.ethz.ch>
Received: from smtp.ini.uzh.ch (smtp.ini.uzh.ch [130.60.230.185])
	 by imap.ini.uzh.ch (Cyrus v2.3.11) with LMTPA;
	 Tue, 30 Apr 2013 23:13:38 +0200
X-Sieve: CMU Sieve 2.3
Received: from smtp.ini.uzh.ch (localhost [127.0.0.1])
	by smtp.ini.uzh.ch (Postfix) with ESMTP id 12CFF2611A
	for <tobi@ini.phys.ethz.ch>; Tue, 30 Apr 2013 23:13:38 +0200 (CEST)
Received: from capocaccia.ethz.ch (capocaccia.ethz.ch [192.33.91.125])
	by smtp.ini.uzh.ch (Postfix) with ESMTP id 0D27826118
	for <tobi@ini.phys.ethz.ch>; Tue, 30 Apr 2013 23:13:38 +0200 (CEST)
Received: from capocaccia.ethz.ch (localhost [127.0.0.1])
	by capocaccia.ethz.ch (Postfix) with ESMTP id EDD5882B9B
	for <tobi@ini.phys.ethz.ch>; Tue, 30 Apr 2013 23:13:37 +0200 (CEST)
X-Original-To: eventbased13@capocaccia.ethz.ch
Delivered-To: eventbased13@capocaccia.ethz.ch
Received: from postout.lrz.de (postout.lrz.de [129.187.254.115])
	by capocaccia.ethz.ch (Postfix) with ESMTP id DEE18827DC
	for <eventbased13@capocaccia.ethz.ch>;
	Tue, 30 Apr 2013 23:13:34 +0200 (CEST)
Received: from lxmhs52.srv.lrz.de (localhost [127.0.0.1])
	by postout4.mail.lrz.de (Postfix) with ESMTP id 63004200AF
	for <eventbased13@capocaccia.ethz.ch>;
	Tue, 30 Apr 2013 23:13:34 +0200 (CEST)
X-Virus-Scanned: by amavisd-new at lrz.de in lxmhs52.srv.lrz.de
Received: from postout4.mail.lrz.de ([127.0.0.1])
	by lxmhs52.srv.lrz.de (lxmhs52.srv.lrz.de [127.0.0.1]) (amavisd-new,
	port 20024)
	with LMTP id kkr6Xch6JSIH for <eventbased13@capocaccia.ethz.ch>;
	Tue, 30 Apr 2013 23:13:34 +0200 (CEST)
Received: from [172.21.32.115] (95-210-225-3.ip.skylogicnet.com [95.210.225.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by postout4.mail.lrz.de (Postfix) with ESMTPSA id 825CE200B8
	for <eventbased13@capocaccia.ethz.ch>;
	Tue, 30 Apr 2013 23:13:31 +0200 (CEST)
Message-ID: <518033F5.3040400@tum.de>
Date: Tue, 30 Apr 2013 23:13:25 +0200
From: Nicolai Waniek <nicolai.waniek@tum.de>
MIME-Version: 1.0
To: eventbased13@capocaccia.ethz.ch
References: <518031A7.5070600@tum.de>
In-Reply-To: <518031A7.5070600@tum.de>
Content-Type: multipart/mixed; boundary="------------080009040607050303030901"
Subject: Re: [CapoCaccia - eventbased13] Retina Linux Driver
X-BeenThere: eventbased13@capocaccia.ethz.ch
X-Mailman-Version: 2.1.13
Precedence: list
List-Id: <eventbased13.capocaccia.ethz.ch>
List-Unsubscribe: <http://capocaccia.ethz.ch/cgi-bin/mailman/options/eventbased13>,
	<mailto:eventbased13-request@capocaccia.ethz.ch?subject=unsubscribe>
List-Archive: <http://capocaccia.ethz.ch/pipermail/eventbased13>
List-Post: <mailto:eventbased13@capocaccia.ethz.ch>
List-Help: <mailto:eventbased13-request@capocaccia.ethz.ch?subject=help>
List-Subscribe: <http://capocaccia.ethz.ch/cgi-bin/mailman/listinfo/eventbased13>,
	<mailto:eventbased13-request@capocaccia.ethz.ch?subject=subscribe>
Sender: eventbased13-bounces@capocaccia.ethz.ch
Errors-To: eventbased13-bounces@capocaccia.ethz.ch
X-Virus-Scanned: ClamAV using ClamSMTP

This is a multi-part message in MIME format.
--------------080009040607050303030901
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Just a slight change to the patch to make sure that it works against the
latest svn-trunk. See attached file.

Cheers

--------------080009040607050303030901
Content-Type: text/x-patch;
 name="retina-kernel-3.7.patch"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename="retina-kernel-3.7.patch"

diff -wrupN driverRetinaLinux/Makefile driverRetinaLinux3.7/Makefile
--- driverRetinaLinux/Makefile	2013-04-30 23:06:27.016261393 +0200
+++ driverRetinaLinux3.7/Makefile	2013-04-30 23:08:03.406367983 +0200
@@ -1,6 +1,6 @@
-
+ifneq ($(KERNELRELEASE),)
 obj-m	:= retina.o
-
+else
 # if we want warnings to be fatal:
 EXTRA_CFLAGS += -Werror
 
@@ -36,3 +36,4 @@ usbtestkill:
 	echo "blacklist usbtest" >/etc/modprobe.d/blacklist-usbtest.conf
 	find /lib/modules/ -name aerfx2.ko -exec rm '{}' ';' || true
 	depmod -a
+endif
diff -wrupN driverRetinaLinux/retina.c driverRetinaLinux3.7/retina.c
--- driverRetinaLinux/retina.c	2013-04-30 23:06:27.017261404 +0200
+++ driverRetinaLinux3.7/retina.c	2013-04-30 23:09:16.267206345 +0200
@@ -17,6 +17,7 @@
 #include <linux/kernel.h>
 #include <linux/device.h>
 #include <linux/slab.h>
+#include <linux/version.h>
 #include <asm/uaccess.h> // /usr/src/linux-headers-2.6.32-32/include/asm-generic
 
 
@@ -630,7 +631,7 @@ static int __init usblab_init(void)
 	/* register this driver with the USB subsystem */
 	result = usb_register(&retina_driver);
 	if (result)
-		err("usb_register failed. Error number %d", result);
+		pr_err("usb_register failed. Error number %d", result);
 
 	return result;
 }

--------------080009040607050303030901
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
eventbased13 mailing list
eventbased13@capocaccia.ethz.ch
http://capocaccia.ethz.ch/cgi-bin/mailman/listinfo/eventbased13

--------------080009040607050303030901--
